<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>D3 Test</title>
  <script type="text/javascript" src="./d3-3.5.17/d3.min.js"></script>
  <link href="./css/bar.css" rel="stylesheet" type="text/css">
</head>
<body>
  <div id="chart">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>
  <button style="clear: both; display: block; margin-top: 50px;"onclick="updateData();">update data</button>
  <script type="text/javascript">
  var numbers = [15,8,42,2];
  d3.select('#chart')
    .selectAll('.bar')
    .data(numbers)
    .style('height',function(d){
      return d+"px";
    })
    .style('margin-top', function(d){
      return 100-d+"px";
    });

    function updateData(){
      // numbers[3] = 60;
      // numbers.push(65);
      numbers.splice(numbers.length-1,1);
      var bars = d3.select('#chart')
        .selectAll('.bar')
        .data(numbers)
        .style('height', function(d){
          return d+'px';
        })
        .style('margin-top', function(d){
          return 100-d+'px';
        });

        bars.enter()
        .append('div')
        .attr('class','bar')
        .style('height', function(d){
          return d+"px";
        })
        .style('margin-top', function(d){
          return 100-d+'px';
        });

        bars.exit()
        .remove();
    }
  </script>
</body>
</html>
